- 当スクリプトはまだ作成中です。
- READMEは「仕様」ではなく「作りたいもの」が書いてあります。
- コロコロ変わります。READMEが一番更新頻度が高いまである。

---
![Image](https://github.com/user-attachments/assets/c2b18610-6ccc-4b08-83ed-9837321dcf60)

![Image](https://github.com/user-attachments/assets/48710101-aa56-4f78-ab43-f4d77f3ff51d)

---

# 目的
- ハルナアウトラインの終了で失ったアウトライン編集体験を再取得する。
- 枯れた技術・簡易な手段で実装し、完成後のメンテナンスコストを低減する。
- 上記を満たす範疇で、可能な限り複数の環境で動作することを目指す。

## ファイル自体の可搬性
- 操作対象は構造化テキストファイル
- ディレクトリによるアウトライン管理ではない
> やはり作品一つをテキストファイル一つに収めることは重要

## アプリ自体の可搬性
- TUIツールにて実現する

## 外部エディタの使用
- nano、vi、などの(普遍的な)エディタに編集機能を肩代わりさせる
- micro、editなどの任意の(ユーザが導入した)エディタも指定可能とする

## 外部ビューワの使用
- 編集したくないときのために、ビューモードも搭載
- less、moreなどのコマンドにビューワ機能を肩代わりさせる
- 何らかの任意のビューワを指定可能とする。

---

# 意図
- 意図する用途は、短い小説の執筆
- ハルナアウトラインが消えてしまい、お気に入りのアウトラインエディタが失われてしまった。
    - もうサ終に怯えたくない
- ハルナアウトラインの代替品を探しても
    - 機能が多すぎるか少なすぎるのでちょうどいいのが欲しい
    - Android携帯とパソコンで動くものが限られるので色んなところで使えるが欲しい
- 世に言うテキストエディターはUIがうるさすぎる
    - ターミナルくらい静かな、Zenっぽいのでいい

## 一旦の答え

### TUIでいいのでは

- UIが静かでよい
- そもそもアウトライン執筆においてエディタ部分にさほど高機能を求めてない
- ターミナルとbashなら色んなとこで動く
    - Android携帯にtermuxをいれて
    - ChromebookのCrostiniをONにして
    - WindowsにWSLをいれて
    > 全部同じUIになる……かも？

### エディタを自分で作る必要なんてないのでは

- MS_EDITや、Microは、編集するのに十分。
- 置換や検索はbashで使えるlinuxコマンドがあればいける。
> これで、実装すべきはツリー形式での表示やノードの操作のみになる！楽！

---

# 機能

## 外部エディタの呼び出し
- edit、microなどターミナルからコマンドラインで呼び出せるもの

## 外部ビューワの呼び出し
- less、moreなどターミナルからコマンドラインで呼び出せるもの

## ツリー操作
- [x] ツリー表示(詳細表示含む)
- [x] ノードの閲覧(編集なし)
- [x] ノードの追加
- [x] ノードの編集
- [x] ノードの削除
- [x] ノードの名称変更→ノードの編集で兼務 
- [x] 配下ノードを含んだ削除(グループ削除)
- [x] ノードの移動(上下交換)
- [x] 配下ノードを含んだ移動(グループ上下交換)
- [x] ノードの深さ変更
- [x] 配下ノードを含んだ深さ変更(グループ深さ変更)
- [x] フォーカス表示(詳細表示含む)
- [x] ノードの結合
- [ ] 配下ノードを含んだノードの結合
- [ ] ノードの分割→自動化は無理では？
- [ ] マーク機能
- [ ] 配下ノードを含んだ別ファイル保存(ノード情報残/消)
- [x] 各ノードの先頭行プレビュー
- [ ] ノードごと個別の折り畳み/展開表示

## マーク機能
- 完了チェックボックス
- 数種類のフラグ(任意の1文字、絵文字を使用することを想定)
- 下のノードをクリッピング

## 模倣・実装しない機能
- 文章の編集機能(ツリー操作のみ行うツールとする)
- 複数の構造化テキストファイルへの対応
- 葉と枝の区別(全てがタイトルを持った葉とする)
- ディレクトリでのツリー化
- 文字コード、改行コードの判定
- 単一ノードの上下交換では、深さが違っても交換可能とする
- 配下ノードを含む上下移動では、深さが同じもの同士のみを許容する

# 機能詳細
## ファイルフォーマット
特に指定しない。<br>
プレーンテキストで、指定のエディタが許容するもの？

## ノードタイトル
^\.+[^.]+\[.{0,5}\]

### ノードシンボル
- 行頭「.」はノードタイトル
- 「.」の個数によってツリーの深さを示す。
- 制限しない。ただし多い場合の表示の保証はしない

### タイトル
- 制限について、未定。
- 空も許可するが、先頭「.」文字は使用できない。

### オプション
最大5のフラグを設定できる。未定。

### ノードの区切りについて
「.」で始まる行から、次の「.」で始まる行の前の行まで。

### レベル判定
- 同じ高さのノードを自動で特別化したりはしない
- レベルは抜いて設定できる(レベル1の下にレベル10のノードが直接ぶら下がれる)

### 順序
判定しない。ファイル上の順行に従う。

## 性能
- 1ＭByteのファイルを、5秒以内にオープンできること。
